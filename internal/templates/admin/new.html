{{ define "title" }}
Admin — New article
{{ end }}

{{ define "content" }}

<main class="admin-page admin-form-wide">

  <header class="admin-header">
    <h1>New article</h1>
    <p>Create a new article and build the site.</p>
  </header>

  <form method="post" action="/admin/new">

    <!-- Article metadata -->
    <fieldset class="form-section">
      <legend>Article metadata</legend>

      <div class="form-group">
        <label for="title">Title</label>
        <input
          id="title"
          type="text"
          name="title"
          required
        >

<select name="subject_id" required>
  {{ range .Subjects }}
    <option value="{{ .Id }}">
      {{ .Title }}
    </option>
  {{ end }}
</select>

      </div>
    </fieldset>

    <!-- HTML content -->
    <fieldset class="form-section">
      <legend>Article content (HTML)</legend>

      <div class="form-group editor-preview-container">
        <label for="description-editor">
          HTML body
          <button
            type="button"
            class="preview-toggle toggle-btn"
            onclick="togglePreview()"
          >
            Preview
          </button>
        </label>

        <!-- CodeMirror textarea -->
        <textarea
          id="description-editor"
          name="html"
          rows="22"
        ></textarea>

        <!-- HTML preview -->
        <div
          id="description-preview"
          class="html-preview"
          hidden
        ></div>
      </div>
    </fieldset>

    <!-- Actions -->
    <div class="admin-actions">
      <button type="submit" class="btn primary">
        ➕ Create & build
      </button>

      <a href="/admin" class="btn">
        Cancel
      </a>
    </div>
  </form>

</main>

<!-- Admin logic + CodeMirror -->
<script src="/assets/js/admin.js"></script>
<script type="module" src="/assets/js/editor.bundle.js"></script>

{{ end }}


